{
	"info": {
		"_postman_id": "f621b27e-3ea9-43ca-912a-0e276877bd76",
		"name": "Account Information",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Get Consumer Account information",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "88c2670a-d888-4d71-8aa2-3e9b61d90d0b",
						"exec": [
							"try{",
							"pm.environment.set(\"response time\",  (pm.response.responseTime)+Number(postman.getEnvironmentVariable(\"response time\")));",
							"pm.environment.set(\"responses\",  1+Number(postman.getEnvironmentVariable(\"responses\")));",
							"console.log(\"Average response time: \" + responseTime + \"ms\");",
							"",
							"let expectedCode = pm.iterationData.get(\"expectedHttpCode\");",
							"var jsonData = JSON.parse(responseBody);",
							"var req = request.url;",
							"var query = request.url.split('/');",
							"console.log(query);",
							"pm.test(\"TEST1: Consumer ID Check\", function() {",
							"    if (data.cnsmr_id==null){",
							"    pm.expect(JSON.stringify(jsonData[0].consumerID)).to.equal(query[5]);",
							"    }else{",
							"    pm.expect(jsonData[0].consumerID).to.equal(data.cnsmr_id);",
							"    }",
							"});",
							"",
							"if (data.cnsmr_id!=null){",
							"    pm.test(\"TEST1A: Title check\", function() {",
							"        pm.expect(JSON.stringify(jsonData[0].title).toUpperCase()).to.equal(data.title);",
							"    });",
							"    pm.test(\"TEST1B: legacyID check\", function() {",
							"        pm.expect(jsonData[0].legacyID).to.equal(JSON.stringify(data.legacyID));",
							"    });",
							"    pm.test(\"TEST1C: firstName check\", function() {",
							"        pm.expect(jsonData[0].firstName).to.equal(data.firstname);",
							"    });",
							"    pm.test(\"TEST1D: lastName check\", function() {",
							"        pm.expect(jsonData[0].lastName).to.equal(data.surname);",
							"    });",
							"    pm.test(\"TEST1E: DOB check\", function() {",
							"        pm.expect(jsonData[0].dateOfBirth.split('T')[0]).to.equal(data.dob);",
							"    });",
							"    pm.test(\"TEST1F: email check\", function() {",
							"        pm.expect(jsonData[0].email.split('T')[0]).to.equal(data.email);",
							"    });",
							"    pm.test(\"TEST1G: consumer address check\", function() {",
							"        if(jsonData[0].consumerAddress!=null){",
							"            pm.expect(jsonData[0].consumerAddress.addressLine1).to.equal(data.AddressLine1);",
							"            pm.expect(jsonData[0].consumerAddress.addressLine2).to.equal(data.AddressLine2);",
							"            pm.expect(jsonData[0].consumerAddress.addressLine3).to.equal(data.AddressLine3);",
							"            pm.expect(jsonData[0].consumerAddress.city).to.equal(data.City);",
							"            pm.expect(jsonData[0].consumerAddress.state).to.equal(data.State);",
							"            pm.expect(jsonData[0].consumerAddress.county).to.equal(data.County);",
							"            pm.expect(jsonData[0].consumerAddress.postCode).to.equal(data.PostCode);",
							"            pm.expect(jsonData[0].consumerAddress.country).to.equal(data.Country);",
							"        }",
							"    });",
							"    /*pm.test(\"TEST1H: consumer Phones check\", function() {",
							"        if(jsonData[0].consumerPhones!=null){",
							"            for(var i=0;  i<(jsonData[0].consumerPhones.length); i++) {",
							"                pm.expect(jsonData[0].consumerPhones[i].consumerPhoneID).to.equal(JSON.stringify(data.consumerPhoneID));",
							"                pm.expect(jsonData[0].consumerPhones[i].number).to.equal(JSON.stringify(data.phn_num));",
							"                pm.expect(jsonData[0].consumerPhones[i].softDeleteFlag).to.equal(JSON.stringify(data.softDeleteFlag));",
							"            }",
							"        }",
							"    });*/",
							"    pm.test(\"TEST1I: consumer Accounts check\", function() {",
							"        pm.expect(jsonData[0].consumerAccounts[0].consumerAccountID).to.equal(data.cnsmr_accnt_id);",
							"        pm.expect(jsonData[0].consumerAccounts[0].currentBalance).to.equal(data.Curr_Bal);",
							"        pm.expect(jsonData[0].consumerAccounts[0].originalBalance).to.equal(data.Orig_Bal);",
							"    });",
							"}",
							"",
							"pm.test(\"TEST2: Status code Check\", function() {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"TEST3: Response Header Checks\", function() {",
							"    pm.response.to.have.header('Content-Type', 'application/json; charset=utf-8', 'Vary', 'Accept-Encoding', 'Content-Encoding', 'gzip', 'Date', '', 'Request-Context', '');",
							"});",
							"",
							"pm.test(\"TEST4: Response time Check: Response Time - \" + (pm.response.responseTime) + \"ms\", function() {",
							"    pm.expect(pm.response.responseTime).to.be.below(5000);",
							"});",
							"",
							"var Ajv = require('ajv'),",
							"ajv = new Ajv({logger: console}),",
							"schema = {",
							"    \"items\": {",
							"        \"required\": [",
							"            \"consumerID\",",
							"            \"legacyID\",",
							"            \"consumerAccountID\",",
							"            \"title\",",
							"            \"firstName\",",
							"            \"lastName\",",
							"            \"regarding\",",
							"            \"productType\",",
							"            \"vendor\",",
							"            \"accountStatus\",",
							"            \"strategy\",",
							"            \"accountOwnership\",",
							"            \"workgroup\",",
							"            \"balanceInformation\",",
							"            \"totalInterestApplied\",",
							"            \"totalRemediationApplied\",",
							"            \"bookOnDate\",",
							"            \"terminationDate\",",
							"            \"lastPaymentDate\",",
							"            \"settlementOffer\",",
							"            \"thirdPartyInformation\",",
							"            \"jointAccounts\",",
							"            \"activePaymentPlan\",",
							"            \"reminders\"",
							"        ],",
							"        \"properties\": {",
							"            \"consumerID\": {",
							"                \"$id\": \"#/items/properties/consumerID\",",
							"                \"type\": \"integer\"",
							"            },",
							"            \"legacyID\": {",
							"                \"$id\": \"#/items/properties/legacyID\",",
							"                \"type\": \"string\"",
							"            },",
							"            \"consumerAccountID\": {",
							"                \"$id\": \"#/items/properties/consumerAccountID\",",
							"                \"type\": \"integer\"",
							"            },",
							"            \"title\": {",
							"                \"$id\": \"#/items/properties/title\",",
							"                \"type\": [\"string\",\"null\"]",
							"            },",
							"            \"firstName\": {",
							"                \"$id\": \"#/items/properties/firstName\",",
							"                \"type\": \"string\"",
							"            },",
							"            \"lastName\": {",
							"                \"$id\": \"#/items/properties/lastName\",",
							"                \"type\": \"string\"",
							"            },",
							"            \"regarding\": {",
							"                \"$id\": \"#/items/properties/regarding\",",
							"                \"type\": \"string\"",
							"            },",
							"            \"productType\": {",
							"                \"$id\": \"#/items/properties/productType\",",
							"                \"type\": \"string\"",
							"            },",
							"            \"vendor\": {",
							"                \"$id\": \"#/items/properties/vendor\",",
							"                \"type\": \"string\"",
							"            },",
							"            \"accountStatus\": {",
							"                \"$id\": \"#/items/properties/accountStatus\",",
							"                \"type\": [\"string\",\"null\"]",
							"            },",
							"            \"strategy\": {",
							"                \"required\": [",
							"                    \"strategyName\",",
							"                    \"strategyDescription\",",
							"                    \"strategyNextStepName\",",
							"                    \"strategyNextStepDescription\"",
							"                ],",
							"                \"properties\": {",
							"                    \"strategyName\": {",
							"                        \"$id\": \"#/items/properties/strategy/properties/strategyName\",",
							"                        \"type\": [\"string\",\"null\"]",
							"                    },",
							"                    \"strategyDescription\": {",
							"                        \"$id\": \"#/items/properties/strategy/properties/strategyDescription\",",
							"                        \"type\": [\"string\",\"null\"]",
							"                    },",
							"                    \"strategyNextStepName\": {",
							"                        \"$id\": \"#/items/properties/strategy/properties/strategyNextStepName\",",
							"                        \"type\": [\"string\",\"null\"]",
							"                    },",
							"                    \"strategyNextStepDescription\": {",
							"                        \"$id\": \"#/items/properties/strategy/properties/strategyNextStepDescription\",",
							"                        \"type\": [\"string\",\"null\"]",
							"                    }",
							"                },",
							"                \"$id\": \"#/items/properties/strategy\",",
							"                \"type\": \"object\"",
							"            },",
							"            \"accountOwnership\": {",
							"                \"$id\": \"#/items/properties/accountOwnership\",",
							"                \"type\": [\"string\",\"null\"]",
							"            },",
							"            \"workgroup\": {",
							"                \"required\": [",
							"                    \"workgroupName\",",
							"                    \"workgroupShortName\"",
							"                ],",
							"                \"properties\": {",
							"                    \"workgroupName\": {",
							"                        \"$id\": \"#/items/properties/workgroup/properties/workgroupName\",",
							"                        \"type\": \"string\"",
							"                    },",
							"                    \"workgroupShortName\": {",
							"                        \"$id\": \"#/items/properties/workgroup/properties/workgroupShortName\",",
							"                        \"type\": \"string\"",
							"                    }",
							"                },",
							"                \"$id\": \"#/items/properties/workgroup\",",
							"                \"type\": \"object\"",
							"            },",
							"            \"balanceInformation\": {",
							"                \"required\": [",
							"                    \"originalBalance\",",
							"                    \"currentBalance\",",
							"                    \"totalPayment\"",
							"                ],",
							"                \"properties\": {",
							"                    \"originalBalance\": {",
							"                        \"$id\": \"#/items/properties/balanceInformation/properties/originalBalance\",",
							"                        \"type\": \"number\"",
							"                    },",
							"                    \"currentBalance\": {",
							"                        \"$id\": \"#/items/properties/balanceInformation/properties/currentBalance\",",
							"                        \"type\": \"number\"",
							"                    },",
							"                    \"totalPayment\": {",
							"                        \"$id\": \"#/items/properties/balanceInformation/properties/totalPayment\",",
							"                        \"type\": \"number\"",
							"                    }",
							"                },",
							"                \"$id\": \"#/items/properties/balanceInformation\",",
							"                \"type\": \"object\"",
							"            },",
							"            \"totalInterestApplied\": {",
							"                \"$id\": \"#/items/properties/totalInterestApplied\",",
							"                \"type\": \"number\"",
							"            },",
							"            \"totalRemediationApplied\": {",
							"                \"$id\": \"#/items/properties/totalRemediationApplied\",",
							"                \"type\": \"number\"",
							"            },",
							"            \"bookOnDate\": {",
							"                \"$id\": \"#/items/properties/bookOnDate\",",
							"                \"type\": \"string\"",
							"            },",
							"            \"terminationDate\": {",
							"                \"$id\": \"#/items/properties/terminationDate\",",
							"                \"type\": [\"string\",\"null\"]",
							"            },",
							"            \"lastPaymentDate\": {",
							"                \"$id\": \"#/items/properties/lastPaymentDate\",",
							"                \"type\": [\"string\",\"null\"]",
							"            },",
							"            \"settlementOffer\": {",
							"                \"required\": [",
							"                    \"amountSaved\",",
							"                    \"settlementOffer\",",
							"                    \"settlementPercentage\",",
							"                    \"amountToPay\"",
							"                ],",
							"                \"properties\": {",
							"                    \"amountSaved\": {",
							"                        \"$id\": \"#/items/properties/settlementOffer/properties/amountSaved\",",
							"                        \"type\": [\"number\",\"null\"]",
							"                    },",
							"                    \"settlementOffer\": {",
							"                        \"$id\": \"#/items/properties/settlementOffer/properties/settlementOffer\",",
							"                        \"type\": [\"string\",\"null\"]",
							"                    },",
							"                    \"settlementPercentage\": {",
							"                        \"$id\": \"#/items/properties/settlementOffer/properties/settlementPercentage\",",
							"                        \"type\": [\"number\",\"null\"]",
							"                    },",
							"                    \"amountToPay\": {",
							"                        \"$id\": \"#/items/properties/settlementOffer/properties/amountToPay\",",
							"                        \"type\": [\"number\",\"null\"]",
							"                    }",
							"                },",
							"                \"$id\": \"#/items/properties/settlementOffer\",",
							"                \"type\": [\"object\",\"null\"]",
							"            },",
							"            \"thirdPartyInformation\": {",
							"                \"required\": [",
							"                    \"thirdPartyName\"",
							"                ],",
							"                \"properties\": {",
							"                    \"thirdPartyName\": {",
							"                        \"$id\": \"#/items/properties/thirdPartyInformation/properties/thirdPartyName\",",
							"                        \"type\": [\"string\",\"null\"]",
							"                    }",
							"                },",
							"                \"$id\": \"#/items/properties/thirdPartyInformation\",",
							"                \"type\": \"object\"",
							"            },",
							"            \"jointAccounts\": {",
							"                \"$id\": \"#/items/properties/jointAccounts\",",
							"                \"type\": \"array\"",
							"            },",
							"            \"activePaymentPlan\": {",
							"                \"$id\": \"#/items/properties/activePaymentPlan\",",
							"                \"type\": \"null\"",
							"            },",
							"            \"reminders\": {",
							"                \"$id\": \"#/items/properties/reminders\",",
							"                \"type\": \"array\"",
							"            }",
							"        },",
							"        \"$id\": \"#/items\",",
							"        \"type\": \"object\"",
							"    },",
							"    \"$id\": \"http://example.org/root.json#\",",
							"    \"type\": \"array\",",
							"    \"definitions\": {},",
							"    \"$schema\": \"http://json-schema.org/draft-07/schema#\"",
							"};",
							"pm.test(\"TEST5: Schema Test\", function(){",
							"    pm.expect(ajv.validate(schema, jsonData)).to.be.true;",
							"});",
							"} catch (e){",
							"    ",
							"    //negative Tests",
							"    ",
							"var req = request.url;",
							"var query = request.url.split('/');",
							"var cid = responseBody.split(':');",
							"pm.test(\"Response time Check: Response Time - \" + (pm.response.responseTime) + \"ms\", function() {",
							"    pm.expect(pm.response.responseTime).to.be.below(5000);",
							"});",
							"pm.test(\"Response Header Checks\", function() {",
							"    pm.response.to.have.header('Content-Type', 'text/plain; charset=utf-8', 'Vary', 'Accept-Encoding', 'X-Content-Type-Options', 'nosniff','Strict-Transport-Security','max-age=31536000; includeSubDomains','Content-Encoding', 'gzip', 'Date', '', 'Request-Context', '', 'Set-Cookie','');",
							"});",
							" pm.test(\"Incorrect Consumer ID should be not found\", function () {",
							"     pm.expect(responseCode.code).to.equal(400);",
							"     pm.expect(responseBody).to.equal(\"Unable to find consumer with consumerID: \"+query[5]);",
							"     pm.expect(cid[1]).to.equal(\" \"+query[5]);",
							"});",
							"}",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "oauth2",
					"oauth2": [
						{
							"key": "accessToken",
							"value": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IkN0VHVoTUptRDVNN0RMZHpEMnYyeDNRS1NSWSIsImtpZCI6IkN0VHVoTUptRDVNN0RMZHpEMnYyeDNRS1NSWSJ9.eyJhdWQiOiJhcGk6Ly84MTE2N2QzZC04NTNmLTQyMDctODBmYS0zMjI1YTQ5MjdhY2EiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8zNjQ3ZTlmNy0wMzA1LTRhYjYtYjA2Zi00YjM2YTM1NDk3OTMvIiwiaWF0IjoxNTg3OTgzMDU1LCJuYmYiOjE1ODc5ODMwNTUsImV4cCI6MTU4Nzk4Njk1NSwiYWlvIjoiNDJkZ1lMajNhSzYzKytXWXFrQ0J4MjhYTGV4ZEJnQT0iLCJhcHBpZCI6IjIxYjhmYmVmLTcyNmItNDdhNC04MTM1LTFiY2ZlMmJhOWE5OCIsImFwcGlkYWNyIjoiMSIsImlkcCI6Imh0dHBzOi8vc3RzLndpbmRvd3MubmV0LzM2NDdlOWY3LTAzMDUtNGFiNi1iMDZmLTRiMzZhMzU0OTc5My8iLCJvaWQiOiI4ZWVmMzgyOS04MDNlLTQzN2UtYTQ5NC01NzQ1NzVkNTBlZTgiLCJyaCI6IjAuQVI4QTktbEhOZ1VEdGtxd2IwczJvMVNYay1fN3VDRnJjcVJIZ1RVYnotSzZtcGdmQUFBLiIsInN1YiI6IjhlZWYzODI5LTgwM2UtNDM3ZS1hNDk0LTU3NDU3NWQ1MGVlOCIsInRpZCI6IjM2NDdlOWY3LTAzMDUtNGFiNi1iMDZmLTRiMzZhMzU0OTc5MyIsInV0aSI6Ikg4SmRfNmJPNWtLQmZoMmhVUGczQUEiLCJ2ZXIiOiIxLjAifQ.u-3xtwqjea379NSeQqzab641_d2-G0K_yXvI-rAmbHbK6K0hHxcEChF7GRQ_uk5kYNucLPDGxOul6w_RIMzowkcz3aDFyWbjyjHP00FTVl5BV-zGwj3JdTKA3tQU7H2qjmG2Ngoz3tyNQzH0Z7hg8j51oJEmB3K38gsd54xhTJaPOynpNj9MzO1qEz76igWr5tRzE0ozjnM7f890Ksds1QZiGWEdqpdE6trCaMHgB_uFfjZ93sOKmm7LZmersIIVa-M1zwRq_Rj-unOeG8NJzaNevPNvooXo2zU1h0Eq4XOFIpPKBGuYmAHM9XvfbHVKejXMhDsObbDz7SMsKANuRg",
							"type": "string"
						},
						{
							"key": "tokenType",
							"value": "Bearer",
							"type": "string"
						},
						{
							"key": "addTokenTo",
							"value": "header",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Ocp-Apim-Subscription-Key-South",
						"value": "{{Ocp-Apim-Subscription-Key-South}}",
						"type": "text"
					},
					{
						"key": "Ocp-Apim-Subscription-Key-West",
						"value": "{{Ocp-Apim-Subscription-Key-West}}",
						"type": "text"
					},
					{
						"key": "Correlation-Id",
						"value": "{{$guid}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "Origin",
						"value": "Postman",
						"type": "text"
					},
					{
						"key": "Username",
						"value": "{{$randomUserName}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{BaseURL}}/accountinformation/consumer/:consumerId",
					"host": [
						"{{BaseURL}}"
					],
					"path": [
						"accountinformation",
						"consumer",
						":consumerId"
					],
					"variable": [
						{
							"key": "consumerId",
							"value": "{{cnsmr_id}}"
						}
					]
				}
			},
			"response": []
		}
	],
	"protocolProfileBehavior": {}
}